<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 4 5 2 2 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:110%;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:20.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	border:none;
	padding:0cm;
	font-size:18.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;
	font-weight:normal;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;
	font-weight:normal;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#404040;
	font-weight:normal;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Calibri Light",sans-serif;
	font-weight:normal;}
h5
	{mso-style-link:"Heading 5 Char";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Calibri Light",sans-serif;
	font-weight:normal;
	font-style:italic;}
h6
	{mso-style-link:"Heading 6 Char";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;
	color:#595959;
	font-weight:normal;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"Heading 7 Char";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;
	color:#595959;
	font-style:italic;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"Heading 8 Char";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;
	font-variant:small-caps;
	color:#595959;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"Heading 9 Char";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;
	font-variant:small-caps;
	color:#595959;
	font-style:italic;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#404040;
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:40.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;
	letter-spacing:-.35pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:40.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;
	letter-spacing:-.35pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:40.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;
	letter-spacing:-.35pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:40.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;
	letter-spacing:-.35pt;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"Subtitle Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	font-size:15.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#404040;}
a:link, span.MsoHyperlink
	{color:#2370CD;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#877589;
	text-decoration:underline;}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	line-height:110%;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:110%;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:110%;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	line-height:110%;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;}
p.MsoQuote, li.MsoQuote, div.MsoQuote
	{mso-style-link:"Quote Char";
	margin-top:12.0pt;
	margin-right:43.2pt;
	margin-bottom:12.0pt;
	margin-left:43.2pt;
	text-align:center;
	line-height:105%;
	font-size:10.5pt;
	font-family:"Calibri Light",sans-serif;
	font-style:italic;}
p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote
	{mso-style-link:"Intense Quote Char";
	margin-right:43.2pt;
	margin-bottom:12.0pt;
	margin-left:43.2pt;
	text-align:center;
	line-height:110%;
	font-size:14.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#50B4C8;}
span.MsoSubtleEmphasis
	{color:#595959;
	font-style:italic;}
span.MsoIntenseEmphasis
	{font-weight:bold;
	font-style:italic;}
span.MsoSubtleReference
	{font-variant:small-caps;
	color:#404040;}
span.MsoIntenseReference
	{font-variant:small-caps;
	font-weight:bold;
	text-decoration:underline;}
span.MsoBookTitle
	{font-variant:small-caps;
	font-weight:bold;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:20.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:0cm;
	page-break-after:avoid;
	border:none;
	padding:0cm;
	font-size:18.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Calibri Light",sans-serif;
	color:#404040;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Calibri Light",sans-serif;}
span.Heading5Char
	{mso-style-name:"Heading 5 Char";
	mso-style-link:"Heading 5";
	font-family:"Calibri Light",sans-serif;
	font-style:italic;}
span.Heading6Char
	{mso-style-name:"Heading 6 Char";
	mso-style-link:"Heading 6";
	font-family:"Calibri Light",sans-serif;
	color:#595959;}
span.Heading7Char
	{mso-style-name:"Heading 7 Char";
	mso-style-link:"Heading 7";
	font-family:"Calibri Light",sans-serif;
	color:#595959;
	font-style:italic;}
span.Heading8Char
	{mso-style-name:"Heading 8 Char";
	mso-style-link:"Heading 8";
	font-family:"Calibri Light",sans-serif;
	font-variant:small-caps;
	color:#595959;}
span.Heading9Char
	{mso-style-name:"Heading 9 Char";
	mso-style-link:"Heading 9";
	font-family:"Calibri Light",sans-serif;
	font-variant:small-caps;
	color:#595959;
	font-style:italic;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Calibri Light",sans-serif;
	color:#328D9F;
	letter-spacing:-.35pt;}
span.SubtitleChar
	{mso-style-name:"Subtitle Char";
	mso-style-link:Subtitle;
	font-family:"Calibri Light",sans-serif;
	color:#404040;}
span.QuoteChar
	{mso-style-name:"Quote Char";
	mso-style-link:Quote;
	font-style:italic;}
span.IntenseQuoteChar
	{mso-style-name:"Intense Quote Char";
	mso-style-link:"Intense Quote";
	font-family:"Calibri Light",sans-serif;
	color:#50B4C8;}
.MsoChpDefault
	{font-size:10.5pt;}
.MsoPapDefault
	{margin-bottom:6.0pt;
	line-height:110%;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-PH link="#2370CD" vlink="#877589">

<div class=WordSection1>

<div style='border:none;border-bottom:solid #50B4C8 1.0pt;padding:0cm 0cm 1.0pt 0cm'>

<h1><span class=MsoBookTitle><span style='font-variant:normal !important;
font-weight:normal'>Create &amp; deploy java microservice in Bluemix Kubernetes
Cluster </span></span></h1>

</div>

<p class=MsoListParagraphCxSpFirst>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
Kubernetes cluster</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Login
to Bluemix <a href="https://console.ng.bluemix.net/">https://console.ng.bluemix.net/</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
Organization and Namespace.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Navigate to Containers and create cluster (takes several minutes to
complete the provisioning)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=452 height=201 id="Picture 1"
src="bluemix_java_microservice_files/image001.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=450 height=229 id="Picture 2"
src="bluemix_java_microservice_files/image002.jpg"></p>

<p class=MsoListParagraphCxSpLast style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Install
command line interfaces bluemix, docker and kubernetes</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Follow
the links for Bluemix &amp; Kubernetes CLI<br>
<img border=0 width=445 height=258 id="Picture 4"
src="bluemix_java_microservice_files/image003.jpg"></p>

<p class=MsoListParagraphCxSpLast style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Install
Docker community edition - <a href="https://www.docker.com/community-edition">https://www.docker.com/community-edition</a></p>

<p class=MsoNormal style='margin-left:36.0pt'><img border=0 width=421
height=177 id="Picture 5" src="bluemix_java_microservice_files/image004.jpg"></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:72.0pt;text-indent:-18.0pt'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Once CLI is installed, gain access to your cluster via cmd prompt.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=300 height=329 id="Picture 6"
src="bluemix_java_microservice_files/image005.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=506 height=324 id="Picture 7"
src="bluemix_java_microservice_files/image006.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=509 height=123 id="Picture 8"
src="bluemix_java_microservice_files/image007.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
private registry to store container images</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
name space (\&gt;<b>bx cr namespage-add ozimage</b> )</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=509 height=176 id="Picture 9"
src="bluemix_java_microservice_files/image008.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
mongodb service in bluemix</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>In
Bluemix, navigate to Services &gt; Dashboard and then click create service.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=465 height=233 id="Picture 10"
src="bluemix_java_microservice_files/image009.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Find
Compose for MongoDB service and select it.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=472 height=259 id="Picture 11"
src="bluemix_java_microservice_files/image010.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Provide name of your mongodb service.<br>
<img border=0 width=511 height=243 id="Picture 12"
src="bluemix_java_microservice_files/image011.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Copy
the SSL Certificate and save it to a file, you need to install the certificate
to gain access of the remote mongodb using mongo client (ex mongobooster)</p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=528 height=275 id="Picture 13"
src="bluemix_java_microservice_files/image012.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=278 height=200 id="Picture 14"
src="bluemix_java_microservice_files/image013.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>e.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Import
certificate into the java keystore cacerts using keytool.<br>
keytool -import -alias ozmongo -file oz_mongodb_cert.crt -keystore cacerts</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>https://docs.oracle.com/javase/tutorial/security/toolfilex/rstep1.html</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=501 height=222 id="Picture 15"
src="bluemix_java_microservice_files/image014.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
rest api with spring-boot and use spring-data api to access mongodb database</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Clone
repo – git clone https://github.com/buics/employee-rest.git</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Import
the employee-rest project into eclipse / sts.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=444 height=189 id="Picture 16"
src="bluemix_java_microservice_files/image015.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Run project as Spring Boot App.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=462 height=279 id="Picture 17"
src="bluemix_java_microservice_files/image016.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Using
your favorite browser, browse the rest api.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=484 height=173 id="Picture 18"
src="bluemix_java_microservice_files/image017.jpg"></p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
docker image &amp; push to repository</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
a file name Dockerfile and paste the following commands. The <b>cacerts</b>
file is the java keystore file where your mongodb certificate was imported (steps
4.e). </p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Lucida Sans",sans-serif'>FROM
java:8</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Lucida Sans",sans-serif'>VOLUME
/tmp</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Lucida Sans",sans-serif'>ADD
target/ oz-rest-spring-boot*.jar oz-rest-spring-boot.jar</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Lucida Sans",sans-serif'>ADD
cacerts /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Lucida Sans",sans-serif'>RUN
sh -c 'touch / oz-rest-spring-boot.jar'</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Lucida Sans",sans-serif'>ENV
JAVA_OPTS=&quot;-Xmx256m -Xms128m&quot;</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:"Lucida Sans",sans-serif'>ENTRYPOINT
[ &quot;sh&quot;, &quot;-c&quot;, &quot;java $JAVA_OPTS
-Djava.security.egd=file:/dev/./urandom -jar / oz-rest-spring-boot.jar&quot;]</span></p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Build
docker image using the bluemix_registry/namespace_steps_3a/project_name:tag</p>

<p class=MsoListParagraphCxSpMiddle><img border=0 width=579 height=250
id="Picture 20" src="bluemix_java_microservice_files/image018.jpg"></p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Run
docker image</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Run
docker container using the newly create image. This is to test the application
locally. </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&gt;docker run
-p 8080:8080 --name employee-rest -d registry.ng.bluemix.net/ozimage/employee-rest:1</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Run
&gt;docker ps to see the processes and confirm if employee-rest is running.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Run &gt;docker logs &lt;container_id&gt; to see the logs generated.</p>

<p class=MsoListParagraphCxSpMiddle><img border=0 width=578 height=236
id="Picture 21" src="bluemix_java_microservice_files/image019.jpg"></p>

<p class=MsoListParagraphCxSpMiddle>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Create
kubernetes deployment</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Push
the newly created image to bluemix.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&gt;bx cr images</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&gt; docker push
registry.ng.bluemix.net/ozimage/employee-rest:1</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=534 height=200 id="Picture 22"
src="bluemix_java_microservice_files/image020.jpg"><br>
<img border=0 width=535 height=143 id="Picture 23"
src="bluemix_java_microservice_files/image021.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>kubectl
run employee-rest-deployment --image=registry.ng.bluemix.net/ozimage/employee-rest:1<br>
<img border=0 width=539 height=90 id="Picture 24"
src="bluemix_java_microservice_files/image022.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>9.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Expose
kubernetes service</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>kubectl
expose deployment/employee-rest-deployment --type=NodePort --port=8080 --name=employee-rest-service</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=537 height=92 id="Picture 25"
src="bluemix_java_microservice_files/image023.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'>10.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span>Access the rest api </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>a.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>kubectl
describe service employee-rest-service<br>
<img border=0 width=537 height=162 id="Picture 30"
src="bluemix_java_microservice_files/image024.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>run
bx cs workers &lt;cluster_name&gt;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=533 height=133 id="Picture 29"
src="bluemix_java_microservice_files/image025.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Browse the application</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>http://173.193.100.54:30890/api  <br>
<img border=0 width=482 height=139 id="Picture 31"
src="bluemix_java_microservice_files/image026.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Using
poster firefox plugin as client, send post request to create new db entry.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=337 height=416 id="Picture 34"
src="bluemix_java_microservice_files/image027.jpg"><br>
<img border=0 width=345 height=400 id="Picture 35"
src="bluemix_java_microservice_files/image028.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>e.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Browse
the employee api</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt'><img border=0
width=375 height=350 id="Picture 36"
src="bluemix_java_microservice_files/image029.jpg">   </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:72.0pt;text-indent:-18.0pt'>f.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Run &gt;kubectl proxy to view kubernetes UI</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:117.0pt;text-indent:
-18.0pt'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="http://localhost:8001/ui">http://localhost:8001/ui</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:108.0pt'><img border=0
width=399 height=199 id="Picture 32"
src="bluemix_java_microservice_files/image030.jpg"></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:108.0pt'>&nbsp;</p>

<p class=MsoListParagraphCxSpLast style='margin-left:72.0pt;text-indent:-18.0pt'>g.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Get
logs - &gt;kubectl logs &lt;name_of_pods&gt;<br>
<img border=0 width=417 height=199 id="Picture 38"
src="bluemix_java_microservice_files/image031.jpg"></p>

</div>

</body>

</html>
